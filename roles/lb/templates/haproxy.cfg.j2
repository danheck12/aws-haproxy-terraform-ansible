global
  log /dev/log local0
  maxconn 2048

defaults
  log global
  mode http
  timeout connect 5s
  timeout client  30s
  timeout server  30s

frontend http_front
  bind *:80
  default_backend web_servers

backend web_servers
  balance roundrobin
{% for host in groups['web'] %}
  server {{ host }} {{ hostvars[host].private_ip }}:80 check
{% endfor %}

